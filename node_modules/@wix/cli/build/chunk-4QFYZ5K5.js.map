{"version":3,"sources":["../package.json","../src/bi.ts"],"sourcesContent":["{\n  \"name\": \"@wix/cli\",\n  \"description\": \"CLI tool for building Wix sites and applications\",\n  \"version\": \"1.1.41\",\n  \"bin\": {\n    \"wix\": \"bin/wix.cjs\"\n  },\n  \"dependencies\": {\n    \"node-gyp\": \"^8.4.1\"\n  },\n  \"devDependencies\": {\n    \"@commander-js/extra-typings\": \"^12.1.0\",\n    \"@types/columnify\": \"^1.5.4\",\n    \"@types/update-notifier\": \"^6.0.8\",\n    \"@wix/bi-logger-wix-cli\": \"^1.38.0\",\n    \"@wix/cli-auth\": \"workspace:*\",\n    \"@wix/cli-command-contract\": \"workspace:*\",\n    \"@wix/cli-core-definitions\": \"workspace:*\",\n    \"@wix/cli-debug-log\": \"workspace:*\",\n    \"@wix/cli-error\": \"workspace:*\",\n    \"@wix/cli-error-reporting\": \"workspace:*\",\n    \"@wix/cli-fs-cache\": \"workspace:*\",\n    \"@wix/cli-i18n\": \"workspace:*\",\n    \"@wix/cli-logger\": \"workspace:*\",\n    \"@wix/cli-site\": \"workspace:*\",\n    \"@wix/cli-telemetry\": \"workspace:*\",\n    \"@wix/cli-telemetry-react\": \"workspace:*\",\n    \"@wix/cli-test-overrides\": \"workspace:*\",\n    \"@wix/cli-ui-kit\": \"workspace:*\",\n    \"@wix/cli-user-config\": \"workspace:*\",\n    \"@wix/tsup-configs\": \"workspace:*\",\n    \"chalk\": \"^5.3.0\",\n    \"columnify\": \"^1.6.0\",\n    \"commander\": \"^12.1.0\",\n    \"p-timeout\": \"^6.1.2\",\n    \"package-json\": \"^8.1.1\",\n    \"react\": \"^18.3.1\",\n    \"semver\": \"^7.6.2\",\n    \"type-fest\": \"^4.18.1\",\n    \"update-notifier\": \"^7.0.0\",\n    \"variant\": \"^3.0.0-dev.27\",\n    \"zod\": \"^3.23.8\"\n  },\n  \"engines\": {\n    \"node\": \">= 18.16\"\n  },\n  \"files\": [\n    \"bin\",\n    \"build\"\n  ],\n  \"optionalDependencies\": {\n    \"fsevents\": \"^2.3.2\"\n  },\n  \"perfer\": {\n    \"bundleSize\": {\n      \"files\": [\n        {\n          \"glob\": \"./build/index.js\",\n          \"maxSize\": \"925kb\"\n        }\n      ]\n    }\n  },\n  \"publishConfig\": {\n    \"registry\": \"https://registry.npmjs.org/\",\n    \"access\": \"public\",\n    \"versionBumpStrategy\": \"manual\",\n    \"logLevel\": \"verbose\"\n  },\n  \"scripts\": {\n    \"build\": \"run -T tsup\",\n    \"build:watch\": \"run build --watch\",\n    \"test\": \"yarn workspace @wix/cli-core-spec run test\",\n    \"test:watch\": \"yarn workspace @wix/cli-core-spec run test:watch\",\n    \"typecheck\": \"run -T tsc --noEmit\"\n  },\n  \"type\": \"module\",\n  \"wix\": {\n    \"artifact\": {\n      \"groupId\": \"com.wixpress.npm\",\n      \"artifactId\": \"wix-cli\"\n    },\n    \"validations\": {\n      \"postBuild\": [\n        \"typecheck\"\n      ]\n    }\n  }\n}\n","import { randomUUID } from 'node:crypto';\nimport type { BiLogger } from '@wix/cli-telemetry';\nimport {\n  createBiLogger as createCliBiLogger,\n  reportCommandStartEvent as originalReportCommandStartEvent,\n} from '@wix/cli-telemetry';\nimport { isCliSystemError } from '@wix/cli-error';\nimport type { ErrorReporter } from '@wix/cli-error-reporting';\nimport { wixCliCliError } from '@wix/bi-logger-wix-cli/v2';\nimport type { Command } from '@commander-js/extra-typings';\nimport { version } from '../package.json';\n\nexport { addUserFields } from '@wix/cli-telemetry';\n\nexport const createBiLogger = async (\n  errorReporter: ErrorReporter,\n  userId?: string\n) => {\n  const biLogger = await createCliBiLogger(\n    {\n      cliSessionId: randomUUID(),\n    },\n    userId\n  );\n\n  errorReporter.on('errorReported', (error) => {\n    void biLogger.report(\n      wixCliCliError({\n        errorMessage: error.message,\n        errorType: isCliSystemError(error) ? 'SystemError' : 'UserError',\n        errorName: error.name,\n      })\n    );\n  });\n\n  return {\n    biLogger,\n  };\n};\n\nexport const reportCommandStartEvent = (\n  biLogger: BiLogger,\n  command: Command<unknown[]>\n) => {\n  return originalReportCommandStartEvent({\n    biLogger,\n    command,\n    cliVersion: version,\n    flow: null,\n  });\n};\n"],"mappings":";;uKAGE,IAAAA,EAAW,SAHb,IAAAC,EAAA,CACE,KAAQ,WACR,YAAe,mDACf,QAAAC,EACA,IAAO,CACL,IAAO,aACT,EACA,aAAgB,CACd,WAAY,QACd,EACA,gBAAmB,CACjB,8BAA+B,UAC/B,mBAAoB,SACpB,yBAA0B,SAC1B,yBAA0B,UAC1B,gBAAiB,cACjB,4BAA6B,cAC7B,4BAA6B,cAC7B,qBAAsB,cACtB,iBAAkB,cAClB,2BAA4B,cAC5B,oBAAqB,cACrB,gBAAiB,cACjB,kBAAmB,cACnB,gBAAiB,cACjB,qBAAsB,cACtB,2BAA4B,cAC5B,0BAA2B,cAC3B,kBAAmB,cACnB,uBAAwB,cACxB,oBAAqB,cACrB,MAAS,SACT,UAAa,SACb,UAAa,UACb,YAAa,SACb,eAAgB,SAChB,MAAS,UACT,OAAU,SACV,YAAa,UACb,kBAAmB,SACnB,QAAW,gBACX,IAAO,SACT,EACA,QAAW,CACT,KAAQ,UACV,EACA,MAAS,CACP,MACA,OACF,EACA,qBAAwB,CACtB,SAAY,QACd,EACA,OAAU,CACR,WAAc,CACZ,MAAS,CACP,CACE,KAAQ,mBACR,QAAW,OACb,CACF,CACF,CACF,EACA,cAAiB,CACf,SAAY,8BACZ,OAAU,SACV,oBAAuB,SACvB,SAAY,SACd,EACA,QAAW,CACT,MAAS,cACT,cAAe,oBACf,KAAQ,6CACR,aAAc,mDACd,UAAa,qBACf,EACA,KAAQ,SACR,IAAO,CACL,SAAY,CACV,QAAW,mBACX,WAAc,SAChB,EACA,YAAe,CACb,UAAa,CACX,WACF,CACF,CACF,CACF,ECxFAC,IAAA,OAAS,cAAAC,MAAkB,cAcpB,IAAMC,EAAiB,MAC5BC,EACAC,IACG,CACH,IAAMC,EAAW,MAAMH,EACrB,CACE,aAAcI,EAAW,CAC3B,EACAF,CACF,EAEA,OAAAD,EAAc,GAAG,gBAAkBI,GAAU,CACtCF,EAAS,OACZG,EAAe,CACb,aAAcD,EAAM,QACpB,UAAWE,EAAiBF,CAAK,EAAI,cAAgB,YACrD,UAAWA,EAAM,IACnB,CAAC,CACH,CACF,CAAC,EAEM,CACL,SAAAF,CACF,CACF,EAEaK,EAA0B,CACrCL,EACAM,IAEOD,EAAgC,CACrC,SAAAL,EACA,QAAAM,EACA,WAAYC,EACZ,KAAM,IACR,CAAC","names":["version","package_default","version","init_esm_shims","randomUUID","createBiLogger","errorReporter","userId","biLogger","randomUUID","error","wixCliCliError","isCliSystemError","reportCommandStartEvent","command","version"]}