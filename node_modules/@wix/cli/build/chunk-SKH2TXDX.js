import { createRequire as _createRequire } from 'node:module';
const require = _createRequire(import.meta.url);
import{d as A,f as p}from"./chunk-QKI65SFV.js";import{a as P}from"./chunk-SHTCM5ZT.js";import{b as u,f as _,g as S}from"./chunk-NUQ6G6J3.js";import{c as q}from"./chunk-3VDYJ2A2.js";import{c as R,e as h}from"./chunk-CU4HXYD6.js";import{c as L,e as T,i}from"./chunk-UO4ZAUJK.js";var F=L((pe,E)=>{"use strict";i();E.exports=function(e,r){if(typeof e!="string")throw new TypeError("expected path to be a string");if(e==="\\"||e==="/")return"/";var a=e.length;if(a<=1)return e;var t="";if(a>4&&e[3]==="\\"){var n=e[2];(n==="?"||n===".")&&e.slice(0,2)==="\\\\"&&(e=e.slice(2),t="//")}var o=e.split(/[/\\]+/);return r!==!1&&o[o.length-1]===""&&o.pop(),t+o.join("/")}});i();var x;(function(e){e.VELO="VELO",e.VELO_ISOLATED="VELO_ISOLATED"})(x||(x={}));var m;(function(e){e.UNKNOWN_GRID_APP_LAYOUT="UNKNOWN_GRID_APP_LAYOUT",e.ONLINE="ONLINE",e.GITHUB="GITHUB",e.GITHUB_BLOCKS="GITHUB_BLOCKS",e.WIX_IDE="WIX_IDE"})(m||(m={}));var w;(function(e){e.UNKNOWN="UNKNOWN",e.GA="GA",e.RC="RC"})(w||(w={}));var y;(function(e){e.UNKNOWN="UNKNOWN",e.WIX_CLI="WIX_CLI"})(y||(y={}));var I;(function(e){e.UNKNOWN="UNKNOWN",e.ANONYMOUS_VISITOR="ANONYMOUS_VISITOR",e.MEMBER="MEMBER",e.WIX_USER="WIX_USER",e.APP="APP"})(I||(I={}));i();import{readdir as J,readFile as D,stat as U}from"node:fs/promises";import{join as v}from"node:path";async function N(e,r=""){return(await Promise.all((await J(v(e,r))).map(async a=>{let t=v(r,a);return(await U(v(e,t))).isDirectory()?N(e,t):{path:t,content:await D(v(e,t),"utf-8")}}))).flat()}function Z(e){return e instanceof Error&&P(e)?.response?.data?.details?.applicationError?.code==="SITE_NOT_PUBLISHED"}i();var W={},C={},G={},M={};var b={},K={};function l(e){var r={"code._base_domain_":[{srcPath:"/_api/wix-code-lifecycle-service",destPath:""}],"editor._base_domain_":[{srcPath:"/_api/wix-code-lifecycle-service",destPath:""}],"blocks._base_domain_":[{srcPath:"/_api/wix-code-lifecycle-service",destPath:""}],"create.editorx":[{srcPath:"/_api/wix-code-lifecycle-service",destPath:""}],"manage._base_domain_":[{srcPath:"/_api/wix-code-lifecycle-service",destPath:""}]};return A(Object.assign(e,{domainToMappings:r}))}function oe(e){var r=p(b,{}),a=r.toJSON,t=r.fromJSON,n=p(K,{}).fromJSON;function o(f){var c=f.host,s=a(e),d={entityFqdn:"wix.velo.apps.v1.app",method:"POST",methodFqn:"wix.velo.apps.v1.LifecycleService.PagesDiff",url:l({protoPath:"/v1/pages-diff",data:s,host:c}),data:s,transformResponse:n,fallback:[{method:"POST",url:l({protoPath:"/v1/pages-diff",data:s,host:c}),data:s}]};return d}return o.fromReq=t,o.__isAmbassador=!0,o}function ae(e){var r=p(W,{}),a=r.toJSON,t=r.fromJSON,n=p(C,{}).fromJSON;function o(f){var c=f.host,s=a(e),d={entityFqdn:"wix.velo.apps.v1.app",method:"POST",methodFqn:"wix.velo.apps.v1.LifecycleService.CreateApp",url:l({protoPath:"/v1/apps",data:s,host:c}),data:s,transformResponse:n};return d}return o.fromReq=t,o.__isAmbassador=!0,o}function se(e){var r=p(G,{}),a=r.toJSON,t=r.fromJSON,n=p(M,{}).fromJSON;function o(f){var c=f.host,s=a(e),d={entityFqdn:"wix.velo.apps.v1.app",method:"POST",methodFqn:"wix.velo.apps.v1.LifecycleService.DeployApp",url:l({protoPath:"/v1/apps/deploy",data:s,host:c}),data:s,transformResponse:n};return d}return o.fromReq=t,o.__isAmbassador=!0,o}i();import{join as O}from"node:path";import{readFile as z}from"node:fs/promises";var g=T(F(),1);async function B(e){try{return await z(e,"utf-8")}catch(r){throw new R({code:h.FailedToReadProjectFiles({cause:r}),cause:r})}}async function V(e){try{return await N(e)}catch(r){throw new R({code:h.FailedToReadProjectFiles({cause:r}),cause:r})}}async function H(e){return await q(O(e,_))?Promise.all([S,_].map(async r=>{let a=await B(O(e,r));return{path:r,content:a}})):[]}async function he(e){let r=(await V(u(e))).map(t=>({content:t.content,path:(0,g.default)(O(u(""),t.path))})),a=await H(e);return{ignoreForbiddenPaths:!0,layout:m.GITHUB,files:r.concat(a)}}export{oe as a,ae as b,se as c,x as d,m as e,w as f,y as g,F as h,Z as i,he as j};
/*! Bundled license information:

normalize-path/index.js:
  (*!
   * normalize-path <https://github.com/jonschlinkert/normalize-path>
   *
   * Copyright (c) 2014-2018, Jon Schlinkert.
   * Released under the MIT License.
   *)
*/
//# sourceMappingURL=chunk-SKH2TXDX.js.map