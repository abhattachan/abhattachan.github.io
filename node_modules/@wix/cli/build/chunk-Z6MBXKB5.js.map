{"version":3,"sources":["../../../node_modules/isexe/windows.js","../../../node_modules/isexe/mode.js","../../../node_modules/isexe/index.js","../../cli-site/src/authentication.ts"],"sourcesContent":["module.exports = isexe\nisexe.sync = sync\n\nvar fs = require('fs')\n\nfunction checkPathExt (path, options) {\n  var pathext = options.pathExt !== undefined ?\n    options.pathExt : process.env.PATHEXT\n\n  if (!pathext) {\n    return true\n  }\n\n  pathext = pathext.split(';')\n  if (pathext.indexOf('') !== -1) {\n    return true\n  }\n  for (var i = 0; i < pathext.length; i++) {\n    var p = pathext[i].toLowerCase()\n    if (p && path.substr(-p.length).toLowerCase() === p) {\n      return true\n    }\n  }\n  return false\n}\n\nfunction checkStat (stat, path, options) {\n  if (!stat.isSymbolicLink() && !stat.isFile()) {\n    return false\n  }\n  return checkPathExt(path, options)\n}\n\nfunction isexe (path, options, cb) {\n  fs.stat(path, function (er, stat) {\n    cb(er, er ? false : checkStat(stat, path, options))\n  })\n}\n\nfunction sync (path, options) {\n  return checkStat(fs.statSync(path), path, options)\n}\n","module.exports = isexe\nisexe.sync = sync\n\nvar fs = require('fs')\n\nfunction isexe (path, options, cb) {\n  fs.stat(path, function (er, stat) {\n    cb(er, er ? false : checkStat(stat, options))\n  })\n}\n\nfunction sync (path, options) {\n  return checkStat(fs.statSync(path), options)\n}\n\nfunction checkStat (stat, options) {\n  return stat.isFile() && checkMode(stat, options)\n}\n\nfunction checkMode (stat, options) {\n  var mod = stat.mode\n  var uid = stat.uid\n  var gid = stat.gid\n\n  var myUid = options.uid !== undefined ?\n    options.uid : process.getuid && process.getuid()\n  var myGid = options.gid !== undefined ?\n    options.gid : process.getgid && process.getgid()\n\n  var u = parseInt('100', 8)\n  var g = parseInt('010', 8)\n  var o = parseInt('001', 8)\n  var ug = u | g\n\n  var ret = (mod & o) ||\n    (mod & g) && gid === myGid ||\n    (mod & u) && uid === myUid ||\n    (mod & ug) && myUid === 0\n\n  return ret\n}\n","var fs = require('fs')\nvar core\nif (process.platform === 'win32' || global.TESTING_WINDOWS) {\n  core = require('./windows.js')\n} else {\n  core = require('./mode.js')\n}\n\nmodule.exports = isexe\nisexe.sync = sync\n\nfunction isexe (path, options, cb) {\n  if (typeof options === 'function') {\n    cb = options\n    options = {}\n  }\n\n  if (!cb) {\n    if (typeof Promise !== 'function') {\n      throw new TypeError('callback not provided')\n    }\n\n    return new Promise(function (resolve, reject) {\n      isexe(path, options || {}, function (er, is) {\n        if (er) {\n          reject(er)\n        } else {\n          resolve(is)\n        }\n      })\n    })\n  }\n\n  core(path, options || {}, function (er, is) {\n    // ignore EACCES because that just means we aren't allowed to run it\n    if (er) {\n      if (er.code === 'EACCES' || options && options.ignoreErrors) {\n        er = null\n        is = false\n      }\n    }\n    cb(er, is)\n  })\n}\n\nfunction sync (path, options) {\n  // my kingdom for a filtered catch\n  try {\n    return core.sync(path, options || {})\n  } catch (er) {\n    if (options && options.ignoreErrors || er.code === 'EACCES') {\n      return false\n    } else {\n      throw er\n    }\n  }\n}\n","import { authenticateWithSiteId } from '@wix/cli-auth';\nimport { addUserFields } from '@wix/cli-telemetry';\nimport type { BiLogger } from '@wix/cli-telemetry';\nimport type { ErrorReporter } from '@wix/cli-error-reporting';\n\nexport async function authenticate({\n  metaSiteId,\n  biLogger,\n  errorReporter,\n}: {\n  metaSiteId: string;\n  biLogger: BiLogger;\n  errorReporter: ErrorReporter;\n}) {\n  const authState = await authenticateWithSiteId(\n    metaSiteId,\n    biLogger,\n    errorReporter\n  );\n  errorReporter.setUser({ id: authState.userInfo.userId });\n  addUserFields(biLogger, authState.userInfo.userId);\n\n  return authState;\n}\n"],"mappings":"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","names":["require_windows","__commonJSMin","exports","module","init_esm_shims","isexe","sync","fs","checkPathExt","path","options","pathext","i","p","checkStat","stat","cb","er","require_mode","__commonJSMin","exports","module","init_esm_shims","isexe","sync","fs","path","options","cb","er","stat","checkStat","checkMode","mod","uid","gid","myUid","myGid","u","o","ug","ret","require_isexe","__commonJSMin","exports","module","init_esm_shims","fs","core","isexe","sync","path","options","cb","resolve","reject","er","is","init_esm_shims","authenticate","metaSiteId","biLogger","errorReporter","authState","authenticateWithSiteId","addUserFields"]}